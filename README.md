# ModernNav - ä¸ªäººå¯¼èˆªä»ªè¡¨ç›˜

ModernNav æ˜¯ä¸€ä¸ªç°ä»£ã€æç®€çš„å¡ç‰‡å¼å¯¼èˆªä»ªè¡¨ç›˜ï¼Œé‡‡ç”¨æ¯›ç»ç’ƒï¼ˆGlassmorphismï¼‰è®¾è®¡é£æ ¼ã€‚å®ƒæ—¨åœ¨æˆä¸ºä¸€ä¸ªç¾è§‚ã€å¯é«˜åº¦è‡ªå®šä¹‰çš„æµè§ˆå™¨èµ·å§‹é¡µæˆ–ä¹¦ç­¾ç®¡ç†å™¨ã€‚

æœ¬é¡¹ç›®åŸºäº **React**ã€**Tailwind CSS** å’Œ **Cloudflare Pages** (Functions + D1 Database) æ„å»ºã€‚

[English Documentation](README_en.md) | [ä¸­æ–‡æ–‡æ¡£](README.md)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ğŸ¨ ç°ä»£å¡ç‰‡ UI (v3.0):** æ”¯æŒèƒŒæ™¯é¢„è§ˆä¸å®æ—¶é…ç½®é¢„è§ˆï¼Œé€‚é…ç£¨ç ‚ç»ç’ƒç‰¹æ•ˆã€‚
- **âš™ï¸ å…¨å±€è®¾ç½®ä¸­å¿ƒ (v3.1):** ç»Ÿä¸€ç®¡ç†ç«™ç‚¹æ ‡é¢˜ã€å›¾æ ‡ API å’Œé¡µè„šé“¾æ¥ã€‚
- **ğŸ§© åŠ¨æ€é¡µè„šç³»ç»Ÿ (v3.1):** æ”¯æŒè‡ªå®šä¹‰ GitHub é“¾æ¥ä¸å¤šæ¡å‹æƒ…é“¾æ¥ã€‚
- **ğŸŒ è‡ªå®šä¹‰å›¾æ ‡ API (v3.1):** é…ç½® Favicon æŠ“å–æœåŠ¡ï¼ˆå¦‚ Google, favicon.im ç­‰ï¼‰ï¼Œæ”¯æŒ `{domain}` å ä½ç¬¦ã€‚
- **ğŸ“ çµæ´»å¸ƒå±€é…ç½® (v3.0):** æ”¯æŒè°ƒèŠ‚å¡ç‰‡å®½é«˜ã€ç”»å¸ƒå®½åº¦ã€ç½‘æ ¼åˆ—æ•°ä»¥åŠå¡ç‰‡é€æ˜åº¦ã€‚
- **ğŸ”Œ é€»è¾‘åŒ–é’©å­ç®¡ç† (v3.0):** ä¸šåŠ¡é€»è¾‘æ•´ç†è‡³ `useDashboardLogic` Hookã€‚
- **ğŸŒ“ æ™ºèƒ½è‰²å½©æå–:** æ”¯æŒè‡ªåŠ¨ä¸»é¢˜åˆ‡æ¢ï¼Œå¹¶èƒ½ä»èƒŒæ™¯å›¾ç‰‡ä¸­æå–ä¸»è‰²è°ƒã€‚
- **ğŸ–±ï¸ æ‹–æ‹½æ’åº:** æ”¯æŒé¼ æ ‡æ‹–æ‹½è°ƒæ•´åˆ†ç±»å’Œé“¾æ¥é¡ºåºã€‚
- **ğŸ–¼ï¸ é«˜åº¦ä¸ªæ€§åŒ–:** è‡ªå®šä¹‰å¡ç‰‡è§„æ ¼ã€èƒŒæ™¯æ ·å¼åŠä¸»é¢˜ç»†èŠ‚ã€‚
- **ğŸŒ å›½é™…åŒ– & æ–‡æ¡ˆæ”¯æŒ:** å†…ç½®ä¸­è‹±æ–‡æ–‡æ¡ˆæ”¯æŒï¼Œè¦†ç›–æ‰€æœ‰é…ç½®é¡¹ã€‚
- **âš¡ è½»é‡åŒ–çŠ¶æ€æç¤º:** çº¯æ–‡å­—æµ®åŠ¨æç¤ºï¼Œå‡å°‘è§†è§‰å¹²æ‰°ã€‚
- **ğŸ” å¢å¼ºå‹å®‰å…¨è®¤è¯ (v2.1):** ç»Ÿä¸€ API å®¢æˆ·ç«¯ï¼Œæ”¯æŒ HttpOnly Cookie æ— æ„Ÿåˆ·æ–°ä¸ CSRF é˜²å¾¡ã€‚
- **â˜ï¸ æ™ºèƒ½æ··åˆå­˜å‚¨ (v2.0):** é‡‡ç”¨â€œè„æ•°æ®ä¼˜å…ˆâ€ç­–ç•¥ä¸çŠ¶æ€æŒä¹…åŒ–æœºåˆ¶ï¼Œè§£å†³æ•°æ®è¦†ç›–ä¸ä¸¢å¤±é—®é¢˜ã€‚
- **ğŸ’¾ å…¨é‡å¤‡ä»½:** æ”¯æŒæ•°æ®ä¸€é”®å¯¼å…¥/å¯¼å‡ºã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯:** React 19, Vite, Tailwind CSS, Lucide React
- **åç«¯:** Cloudflare Pages Functions (Serverless)
- **æ•°æ®åº“:** Cloudflare D1 (Serverless SQL Database)
- **é‰´æƒ & è¯·æ±‚:** Unified API Client + Silent Refresh (JWT HMAC-SHA256)
- **è¯­è¨€:** TypeScript

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js (v18 æˆ–æ›´é«˜ç‰ˆæœ¬)
- npm æˆ– yarn

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. æœ¬åœ°å¼€å‘ (ä»…å‰ç«¯)

å¦‚æœæ‚¨åªæƒ³ä¿®æ”¹ UI ç•Œé¢ï¼ˆæ•°æ®å°†å­˜å‚¨åœ¨ LocalStorageï¼‰ï¼š

```bash
npm run dev
```

### 3. æœ¬åœ°å¼€å‘ (å…¨æ ˆ + Cloudflare æ¨¡æ‹Ÿ)

è¦åœ¨æœ¬åœ°æµ‹è¯•åç«¯ API å’Œ D1 å­˜å‚¨ï¼Œæ‚¨éœ€è¦å®‰è£… `wrangler` CLI å·¥å…·ã€‚

1.  å®‰è£… Wrangler:

    ```bash
    npm install -D wrangler
    ```

2.  åˆå§‹åŒ–æœ¬åœ°æ•°æ®åº“è¡¨ç»“æ„:

    ```bash
    npx wrangler d1 execute modern-nav-db --local --file=./schema.sql
    ```

3.  è¿è¡Œ Cloudflare Pages æ¨¡æ‹Ÿç¯å¢ƒ:
    ```bash
    npx wrangler pages dev . --d1 DB=modern-nav-db
    ```
    _è¿™å°†åœ¨æœ¬åœ°æ¨¡æ‹Ÿ Cloudflare çš„è¿è¡Œç¯å¢ƒã€‚_

## ğŸ“¦ éƒ¨ç½²æŒ‡å— (Cloudflare Pages)

æœ¬é¡¹ç›®ä¸“ä¸º **Cloudflare Pages** ä¼˜åŒ–ã€‚

### ç¬¬ä¸€æ­¥: æ¨é€åˆ° Git

å°†æ­¤ä»“åº“ Fork åˆ°æ‚¨çš„ GitHub æˆ– GitLab ä»“åº“ã€‚

### ç¬¬äºŒæ­¥: åˆ›å»º Cloudflare é¡¹ç›®

1.  ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)ã€‚
2.  è¿›å…¥ **Workers & Pages** > **Overview** > **Create Application** > **Pages** > **Connect to Git**ã€‚
3.  é€‰æ‹©æ‚¨çš„ä»£ç ä»“åº“ã€‚

### ç¬¬ä¸‰æ­¥: æ„å»ºè®¾ç½® (Build Settings)

- **Framework preset (æ¡†æ¶é¢„è®¾):** é€‰æ‹© `æ— `
- **Build command (æ„å»ºå‘½ä»¤):** `npm run build`
- **Build output directory (è¾“å‡ºç›®å½•):** `dist`

### ç¬¬å››æ­¥: é…ç½®æ•°æ®åº“ (D1)

1.  é¡¹ç›®åˆ›å»ºå®Œæˆåï¼Œåœ¨ Cloudflare ä¾§è¾¹æ ç‚¹å‡» **Workers & Pages** > **D1 SQL Database**ã€‚
2.  ç‚¹å‡» **Create** åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ (ä¾‹å¦‚å‘½åä¸º `modern-nav-db`)ã€‚
3.  ç‚¹å‡»è¿›å…¥è¯¥æ•°æ®åº“ï¼Œé€‰æ‹© **Console** æ ‡ç­¾é¡µã€‚
4.  **é‡è¦:** æ‰“å¼€é¡¹ç›®ä¸­çš„ `schema.sql` æ–‡ä»¶ï¼Œå¤åˆ¶å…¶ä¸­çš„ SQL è¯­å¥å¹¶åœ¨ Console ä¸­ **Execute**ï¼Œä»¥åˆå§‹åŒ–è¡¨ç»“æ„å’Œé»˜è®¤å¯†ç ã€‚
5.  å›åˆ°æ‚¨åˆšæ‰åˆ›å»ºçš„ Pages é¡¹ç›®é¡µé¢: ç‚¹å‡» **Settings** > **Functions** > **D1 Database Bindings**ã€‚
6.  æ·»åŠ ç»‘å®š (Add binding):
    - **Variable name (å˜é‡å):** å¿…é¡»å¡«å†™ `DB` (å¿…é¡»å®Œå…¨ä¸€è‡´)ã€‚
    - **D1 Database:** é€‰æ‹©æ‚¨åˆšæ‰åˆ›å»ºçš„ `modern-nav-db`ã€‚
7.  **ä¿å­˜** å¹¶ **é‡æ–°éƒ¨ç½²** (è¿›å…¥ Deployments > ç‚¹å‡»æœ€æ–°éƒ¨ç½²å³ä¾§çš„ä¸‰ä¸ªç‚¹ > Retry deployment)ã€‚

## âš™ï¸ é…ç½®ä¸ä½¿ç”¨

### åˆå§‹åŒ–è®¾ç½®

1.  æ‰“å¼€éƒ¨ç½²å¥½çš„ç½‘ç«™ã€‚
2.  ç‚¹å‡»å³ä¸Šè§’çš„ **è®¾ç½® (é½¿è½®å›¾æ ‡)**ã€‚
3.  è¾“å…¥é»˜è®¤è®¿é—®ä»£ç : `admin`ã€‚
4.  **é‡è¦æç¤º:** è¯·ç«‹å³è¿›å…¥ "å®‰å…¨è®¾ç½® (Security)" é€‰é¡¹å¡ä¿®æ”¹æ‚¨çš„è®¿é—®ä»£ç ã€‚

### ä¸ªæ€§åŒ–

- **å†…å®¹ç®¡ç†:** åœ¨ "å†…å®¹ç®¡ç†" æ ‡ç­¾é¡µæ·»åŠ åˆ†ç±»ã€å­èœå•å’Œé“¾æ¥ï¼Œæ”¯æŒæ‹–æ‹½æ’åºã€‚
- **å¤–è§‚è®¾ç½®:** åœ¨ "å¤–è§‚è®¾ç½®" æ ‡ç­¾é¡µæ›´æ”¹èƒŒæ™¯å›¾ç‰‡ URL å’Œè°ƒèŠ‚å¡ç‰‡é€æ˜åº¦ã€‚

## ğŸ“‚ é¡¹ç›®ç»“æ„

```text
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”‚   â”œâ”€â”€ favicon.svg             # ç«™ç‚¹å›¾æ ‡
â”‚   â””â”€â”€ fonts/                  # å­—ä½“æ–‡ä»¶
â”œâ”€â”€ functions/api/              # Cloudflare Pages Functions (åç«¯ API)
â”‚   â”œâ”€â”€ auth.ts                 # é‰´æƒæ¥å£ (ç™»å½•/åˆ·æ–°/ä¿®æ”¹å¯†ç )
â”‚   â”œâ”€â”€ bootstrap.ts            # åˆå§‹åŒ–æ•°æ®æ¥å£ (Read D1)
â”‚   â”œâ”€â”€ health.ts               # å¥åº·æ£€æŸ¥æ¥å£
â”‚   â”œâ”€â”€ update.ts               # æ•°æ®åŒæ­¥æ¥å£ (Write D1)
â”‚   â””â”€â”€ utils/                  # åç«¯å·¥å…·å‡½æ•° (é‰´æƒ/éªŒè¯/æ—¥å¿—)
â”œâ”€â”€ src/                        # å‰ç«¯æºä»£ç 
â”‚   â”œâ”€â”€ assets/                 # é™æ€èµ„æºå¼•ç”¨
â”‚   â”œâ”€â”€ components/             # React UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ settings/           # è®¾ç½®æ¨¡æ€æ¡†ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ AppearanceTab.tsx   # å¤–è§‚è®¾ç½®é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthScreen.tsx      # è®¤è¯/ç™»å½•é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ ContentTab.tsx      # å†…å®¹ç®¡ç†é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ DataTab.tsx         # æ•°æ®å¤‡ä»½/æ¢å¤é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ GeneralTab.tsx      # å…¨å±€è®¾ç½®é¡µ (æ–°)
â”‚   â”‚   â”‚   â””â”€â”€ SecurityTab.tsx     # å®‰å…¨è®¾ç½®é¡µ
â”‚   â”‚   â”œâ”€â”€ BackgroundLayer.tsx # æ²‰æµ¸å¼èƒŒæ™¯æ¸²æŸ“
â”‚   â”‚   â”œâ”€â”€ CategoryNav.tsx     # ä¾§è¾¹/é¡¶éƒ¨å¯¼èˆªæ 
â”‚   â”‚   â”œâ”€â”€ Footer.tsx          # å“åº”å¼é¡µè„š
â”‚   â”‚   â”œâ”€â”€ GlassCard.tsx       # æ¯›ç»ç’ƒå¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ IconPicker.tsx      # å›¾æ ‡é€‰æ‹©ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LinkManagerModal.tsx # è®¾ç½®å¼¹çª—å®¹å™¨
â”‚   â”‚   â”œâ”€â”€ SearchBar.tsx       # èšåˆæœç´¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ SkeletonLoader.tsx  # è¯­ä¹‰åŒ–éª¨æ¶å±
â”‚   â”‚   â”œâ”€â”€ SmartIcon.tsx       # æ™ºèƒ½å›¾æ ‡æ•è·
â”‚   â”‚   â”œâ”€â”€ SyncIndicator.tsx   # åŒæ­¥çŠ¶æ€æŒ‡ç¤ºå™¨
â”‚   â”‚   â””â”€â”€ Toast.tsx           # å…¨å±€æç¤ºç»„ä»¶
â”‚   â”œâ”€â”€ contexts/               # å…¨å±€çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ LanguageContext.tsx # å¤šè¯­è¨€ Context
â”‚   â”œâ”€â”€ hooks/                  # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useDashboardLogic.ts # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ (çŠ¶æ€/åŒæ­¥/æ›´æ–°)
â”‚   â”‚   â””â”€â”€ useCategoryDragDrop.ts # æ‹–æ‹½æ’åºé€»è¾‘
â”‚   â”œâ”€â”€ services/               # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ apiClient.ts        # ç»Ÿä¸€ API å®¢æˆ·ç«¯ (è®¤è¯/æ‹¦æˆª/é‡è¯•)
â”‚   â”‚   â””â”€â”€ storage.ts          # æ•°æ®å­˜å‚¨ä¸åŒæ­¥æœåŠ¡ (æ ¸å¿ƒé€»è¾‘)
â”‚   â”œâ”€â”€ types/                  # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts            # ç±»å‹å£°æ˜å…¥å£
â”‚   â”œâ”€â”€ utils/                  # å‰ç«¯å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ color.ts            # é¢œè‰²æå–å·¥å…·
â”‚   â”‚   â””â”€â”€ favicon.ts          # å›¾æ ‡ç”Ÿæˆå·¥å…· (æ–°)
â”‚   â”œâ”€â”€ App.tsx                 # åº”ç”¨æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ constants.tsx           # å¸¸é‡é…ç½®
â”‚   â”œâ”€â”€ index.tsx               # åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ index.css               # å…¨å±€æ ·å¼ (Tailwind)
â”œâ”€â”€ index.html                  # HTML æ¨¡æ¿
â”œâ”€â”€ vite.config.ts              # Vite æ„å»ºé…ç½®
â”œâ”€â”€ tsconfig.json               # TypeScript é…ç½®
â””â”€â”€ wrangler.toml               # Cloudflare Pages é…ç½®
```

## ğŸ“„ è®¸å¯è¯

MIT License. ä¾›ä¸ªäººå…è´¹ä½¿ç”¨å’Œä¿®æ”¹ã€‚
